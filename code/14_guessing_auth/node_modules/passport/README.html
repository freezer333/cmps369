<!doctype html><html><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Scott Frees</title>

<style type='text/css'>
  *{margin:0;padding:0;}
  body {
    font:13.34px helvetica,arial,freesans,clean,sans-serif;
    color:black;
    line-height:1.4em;
    background-color: #F8F8F8;
    padding: 0.7em;
  }
  p {
    margin:1em 0;
    line-height:1.5em;
  }
  table {
    font-size:inherit;
    font:100%;
    margin-top:1em;
    margin-bottom:1em;
  }
  table th{border-bottom:1px solid #bbb;padding:.2em 1em;}
  table td{border-bottom:1px solid #ddd;padding:.2em 1em;}
  input[type=text],input[type=password],input[type=image],textarea{font:99% helvetica,arial,freesans,sans-serif;}
  select,option{padding:0 .25em;}
  optgroup{margin-top:.5em;}
  pre,code{font:12px Monaco,"Courier New","DejaVu Sans Mono","Bitstream Vera Sans Mono",monospace;}
  pre {
    margin:1em 0;
    font-size:12px;
    background-color:#eee;
    border:1px solid #ddd;
    padding:5px;
    line-height:1.5em;
    color:#444;
    overflow:auto;
    -webkit-box-shadow:rgba(0,0,0,0.07) 0 1px 2px inset;
    -webkit-border-radius:3px;
    -moz-border-radius:3px;border-radius:3px;
  }
  pre code {
    padding:0;
    font-size:12px;
    background-color:#eee;
    border:none;
  }
  code {
    font-size:12px;
    background-color:#f8f8ff;
    color:#444;
    padding:0 .2em;
    border:1px solid #dedede;
  }
  img{border:0;max-width:100%;}
  abbr{border-bottom:none;}
  a{color:#4183c4;text-decoration:none;}
  a:hover{text-decoration:underline;}
  a code,a:link code,a:visited code{color:#4183c4;}
  h2,h3{margin:1em 0;}
  h1,h2,h3,h4,h5,h6{border:0;}
  h1{font-size:170%;border-top:4px solid #aaa;padding-top:.5em;margin-top:1.5em;}
  h1:first-child{margin-top:0;padding-top:.25em;border-top:none;}
  h2{font-size:150%;margin-top:1.5em;border-top:4px solid #e0e0e0;padding-top:.5em;}
  h3{margin-top:1em;}
  hr{border:1px solid #ddd;}
  ul{margin:1em 0 1em 2em;}
  ol{margin:1em 0 1em 2em;}
  ul li,ol li{margin-top:.5em;margin-bottom:.5em;}
  ul ul,ul ol,ol ol,ol ul{margin-top:0;margin-bottom:0;}
  blockquote{margin:1em 0;border-left:5px solid #ddd;padding-left:.6em;color:#555;}
  dt{font-weight:bold;margin-left:1em;}
  dd{margin-left:2em;margin-bottom:1em;}
  sup {
      font-size: 0.83em;
      vertical-align: super;
      line-height: 0;
  }
  * {
    -webkit-print-color-adjust: exact;
  }

  .highlight {
    background-color:#f1c40f;
    padding-bottom:1em;
    padding-right:1em;
    padding-left:1em;
    font-weight:bold;
  }
  @media screen and (min-width: 914px) {
      body {
          width: 854px;
          margin:0 auto;
      }
  }
  @media print {
    table, pre {
      page-break-inside: avoid;
    }
    pre {
      word-wrap: break-word;
    }
    .print-page {page-break-after: always;}
    body {
      background-color: white
    }
  }


</style>

</head>
<h1 id="passport">Passport</h1>
<p>Passport is <a href="http://expressjs.com/">Express</a>-compatible authentication<br>middleware for <a href="http://nodejs.org/">Node.js</a>.</p>
<p>Passport&#39;s sole purpose is to authenticate requests, which it does through an<br>extensible set of plugins known as <em>strategies</em>.  Passport does not mount<br>routes or assume any particular database schema, which maximizes flexiblity and<br>allows application-level decisions to be made by the developer.  The API is<br>simple: you provide Passport a request to authenticate, and Passport provides<br>hooks for controlling what occurs when authentication succeeds or fails.</p>
<h2 id="install">Install</h2>
<pre><code>$ npm install passport
</code></pre><h6 id="donate">Donate</h6>
<p>Using Passport in your project?  <a href="https://www.gittip.com/jaredhanson/">Donations</a><br>are greatly appreciated and help support development of this and other quality<br>modules.</p>
<h2 id="usage">Usage</h2>
<h4 id="strategies">Strategies</h4>
<p>Passport uses the concept of strategies to authenticate requests.  Strategies<br>can range from verifying username and password credentials, delegated<br>authentication using <a href="http://oauth.net/">OAuth</a> (for example, via <a href="http://www.facebook.com/">Facebook</a><br>or <a href="http://twitter.com/">Twitter</a>), or federated authentication using <a href="http://openid.net/">OpenID</a>.</p>
<p>Before authenticating requests, the strategy (or strategies) used by an<br>application must be configured.</p>
<pre><code>passport.use(new LocalStrategy(
  function(username, password, done) {
    User.findOne({ username: username, password: password }, function (err, user) {
      done(err, user);
    });
  }
));
</code></pre><h4 id="sessions">Sessions</h4>
<p>Passport will maintain persistent login sessions.  In order for persistent<br>sessions to work, the authenticated user must be serialized to the session, and<br>deserialized when subsequent requests are made.</p>
<p>Passport does not impose any restrictions on how your user records are stored.<br>Instead, you provide functions to Passport which implements the necessary<br>serialization and deserialization logic.  In a typical application, this will be<br>as simple as serializing the user ID, and finding the user by ID when<br>deserializing.</p>
<pre><code>passport.serializeUser(function(user, done) {
  done(null, user.id);
});

passport.deserializeUser(function(id, done) {
  User.findById(id, function (err, user) {
    done(err, user);
  });
});
</code></pre><h4 id="middleware">Middleware</h4>
<p>To use Passport in an <a href="http://expressjs.com/">Express</a> or<br><a href="http://senchalabs.github.com/connect/">Connect</a>-based application, configure it<br>with the required <code>passport.initialize()</code> middleware.  If your application uses<br>persistent login sessions (recommended, but not required), <code>passport.session()</code><br>middleware must also be used.</p>
<pre><code>app.configure(function() {
  app.use(express.static(__dirname + &#39;/../../public&#39;));
  app.use(express.cookieParser());
  app.use(express.bodyParser());
  app.use(express.session({ secret: &#39;keyboard cat&#39; }));
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
});
</code></pre><h4 id="authenticate-requests">Authenticate Requests</h4>
<p>Passport provides an <code>authenticate()</code> function, which is used as route<br>middleware to authenticate requests.</p>
<pre><code>app.post(&#39;/login&#39;, 
  passport.authenticate(&#39;local&#39;, { failureRedirect: &#39;/login&#39; }),
  function(req, res) {
    res.redirect(&#39;/&#39;);
  });
</code></pre><h2 id="strategies">Strategies</h2>
<p>Passport has a comprehensive set of <strong>over 140</strong> authentication strategies<br>covering social networking, enterprise integration, API services, and more.<br>The <a href="https://github.com/jaredhanson/passport/wiki/Strategies">complete list</a> is<br>available on the <a href="https://github.com/jaredhanson/passport/wiki">wiki</a>.</p>
<p>The following table lists commonly used strategies:</p>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>Protocol</th>
<th>Developer</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/jaredhanson/passport-local">Local</a></td>
<td>HTML form</td>
<td><a href="https://github.com/jaredhanson">Jared Hanson</a></td>
</tr>
<tr>
<td><a href="https://github.com/jaredhanson/passport-openid">OpenID</a></td>
<td>OpenID</td>
<td><a href="https://github.com/jaredhanson">Jared Hanson</a></td>
</tr>
<tr>
<td><a href="https://github.com/jaredhanson/passport-browserid">BrowserID</a></td>
<td>BrowserID</td>
<td><a href="https://github.com/jaredhanson">Jared Hanson</a></td>
</tr>
<tr>
<td><a href="https://github.com/jaredhanson/passport-facebook">Facebook</a></td>
<td>OAuth 2.0</td>
<td><a href="https://github.com/jaredhanson">Jared Hanson</a></td>
</tr>
<tr>
<td><a href="https://github.com/jaredhanson/passport-google">Google</a></td>
<td>OpenID</td>
<td><a href="https://github.com/jaredhanson">Jared Hanson</a></td>
</tr>
<tr>
<td><a href="https://github.com/jaredhanson/passport-google-oauth">Google</a></td>
<td>OAuth / OAuth 2.0</td>
<td><a href="https://github.com/jaredhanson">Jared Hanson</a></td>
</tr>
<tr>
<td><a href="https://github.com/jaredhanson/passport-twitter">Twitter</a></td>
<td>OAuth</td>
<td><a href="https://github.com/jaredhanson">Jared Hanson</a></td>
</tr>
</tbody>
</table>
<h2 id="examples">Examples</h2>
<ul>
<li>For a complete, working example, refer to the <a href="https://github.com/jaredhanson/passport-local/tree/master/examples/login">login example</a><br>included in <a href="https://github.com/jaredhanson/passport-local">passport-local</a>.</li>
<li>Please refer to this <a href="http://mherman.org/blog/2013/11/10/social-authentication-with-passport-dot-js/">tutorial</a> on setting up various social authentication strategies, including a working example found on this <a href="https://github.com/mjhea0/passport-examples">repo</a>.</li>
</ul>
<h2 id="related-modules">Related Modules</h2>
<ul>
<li><a href="https://github.com/jaredhanson/locomotive">Locomotive</a> — Powerful MVC web framework</li>
<li><a href="https://github.com/jaredhanson/oauthorize">OAuthorize</a> — OAuth service provider toolkit</li>
<li><a href="https://github.com/jaredhanson/oauth2orize">OAuth2orize</a> — OAuth 2.0 authorization server toolkit</li>
<li><a href="https://github.com/jaredhanson/connect-ensure-login">connect-ensure-login</a>  — middleware to ensure login sessions</li>
</ul>
<p>The <a href="https://github.com/jaredhanson/passport/wiki/Modules">modules</a> page on the<br><a href="https://github.com/jaredhanson/passport/wiki">wiki</a> lists other useful modules<br>that build upon or integrate with Passport.</p>
<h2 id="tests">Tests</h2>
<pre><code>$ npm install --dev
$ make test
</code></pre><p><a href="http://travis-ci.org/jaredhanson/passport"><img src="https://secure.travis-ci.org/jaredhanson/passport.png" alt="Build Status"></a></p>
<h2 id="credits">Credits</h2>
<ul>
<li><a href="http://github.com/jaredhanson">Jared Hanson</a></li>
</ul>
<h2 id="license">License</h2>
<p><a href="http://opensource.org/licenses/MIT">The MIT License</a></p>
<p>Copyright (c) 2011-2013 Jared Hanson <a href="[http://jaredhanson.net/](http://jaredhanson.net/)">[http://jaredhanson.net/](http://jaredhanson.net/)</a></p>
</html>