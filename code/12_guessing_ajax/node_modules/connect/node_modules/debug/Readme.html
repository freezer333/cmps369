<!doctype html><html><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Scott Frees</title>

<style type='text/css'>
  *{margin:0;padding:0;}
  body {
    font:13.34px helvetica,arial,freesans,clean,sans-serif;
    color:black;
    line-height:1.4em;
    background-color: #F8F8F8;
    padding: 0.7em;
  }
  p {
    margin:1em 0;
    line-height:1.5em;
  }
  table {
    font-size:inherit;
    font:100%;
    margin-top:1em;
    margin-bottom:1em;
  }
  table th{border-bottom:1px solid #bbb;padding:.2em 1em;}
  table td{border-bottom:1px solid #ddd;padding:.2em 1em;}
  input[type=text],input[type=password],input[type=image],textarea{font:99% helvetica,arial,freesans,sans-serif;}
  select,option{padding:0 .25em;}
  optgroup{margin-top:.5em;}
  pre,code{font:12px Monaco,"Courier New","DejaVu Sans Mono","Bitstream Vera Sans Mono",monospace;}
  pre {
    margin:1em 0;
    font-size:12px;
    background-color:#eee;
    border:1px solid #ddd;
    padding:5px;
    line-height:1.5em;
    color:#444;
    overflow:auto;
    -webkit-box-shadow:rgba(0,0,0,0.07) 0 1px 2px inset;
    -webkit-border-radius:3px;
    -moz-border-radius:3px;border-radius:3px;
  }
  pre code {
    padding:0;
    font-size:12px;
    background-color:#eee;
    border:none;
  }
  code {
    font-size:12px;
    background-color:#f8f8ff;
    color:#444;
    padding:0 .2em;
    border:1px solid #dedede;
  }
  img{border:0;max-width:100%;}
  abbr{border-bottom:none;}
  a{color:#4183c4;text-decoration:none;}
  a:hover{text-decoration:underline;}
  a code,a:link code,a:visited code{color:#4183c4;}
  h2,h3{margin:1em 0;}
  h1,h2,h3,h4,h5,h6{border:0;}
  h1{font-size:170%;border-top:4px solid #aaa;padding-top:.5em;margin-top:1.5em;}
  h1:first-child{margin-top:0;padding-top:.25em;border-top:none;}
  h2{font-size:150%;margin-top:1.5em;border-top:4px solid #e0e0e0;padding-top:.5em;}
  h3{margin-top:1em;}
  hr{border:1px solid #ddd;}
  ul{margin:1em 0 1em 2em;}
  ol{margin:1em 0 1em 2em;}
  ul li,ol li{margin-top:.5em;margin-bottom:.5em;}
  ul ul,ul ol,ol ol,ol ul{margin-top:0;margin-bottom:0;}
  blockquote{margin:1em 0;border-left:5px solid #ddd;padding-left:.6em;color:#555;}
  dt{font-weight:bold;margin-left:1em;}
  dd{margin-left:2em;margin-bottom:1em;}
  sup {
      font-size: 0.83em;
      vertical-align: super;
      line-height: 0;
  }
  * {
    -webkit-print-color-adjust: exact;
  }

  .highlight {
    background-color:#f1c40f;
    padding-bottom:1em;
    padding-right:1em;
    padding-left:1em;
    font-weight:bold;
  }
  @media screen and (min-width: 914px) {
      body {
          width: 854px;
          margin:0 auto;
      }
  }
  @media print {
    table, pre {
      page-break-inside: avoid;
    }
    pre {
      word-wrap: break-word;
    }
    .print-page {page-break-after: always;}
    body {
      background-color: white
    }
  }


</style>

</head>
<h1 id="debug">debug</h1>
<p>  tiny node.js debugging utility modelled after node core&#39;s debugging technique.</p>
<h2 id="installation">Installation</h2>
<pre><code class="lang-bash">$ npm install debug
</code></pre>
<h2 id="usage">Usage</h2>
<p> With <code>debug</code> you simply invoke the exported function to generate your debug function, passing it a name which will determine if a noop function is returned, or a decorated <code>console.error</code>, so all of the <code>console</code> format string goodies you&#39;re used to work fine. A unique color is selected per-function for visibility.</p>
<p>Example <em>app.js</em>:</p>
<pre><code class="lang-js">var debug = require(&#39;debug&#39;)(&#39;http&#39;)
  , http = require(&#39;http&#39;)
  , name = &#39;My App&#39;;

// fake app

debug(&#39;booting %s&#39;, name);

http.createServer(function(req, res){
  debug(req.method + &#39; &#39; + req.url);
  res.end(&#39;hello\n&#39;);
}).listen(3000, function(){
  debug(&#39;listening&#39;);
});

// fake worker of some kind

require(&#39;./worker&#39;);
</code></pre>
<p>Example <em>worker.js</em>:</p>
<pre><code class="lang-js">var debug = require(&#39;debug&#39;)(&#39;worker&#39;);

setInterval(function(){
  debug(&#39;doing some work&#39;);
}, 1000);
</code></pre>
<p> The <strong>DEBUG</strong> environment variable is then used to enable these based on space or comma-delimited names. Here are some examples:</p>
<p>  <img src="http://f.cl.ly/items/18471z1H402O24072r1J/Screenshot.png" alt="debug http and worker"></p>
<p>  <img src="http://f.cl.ly/items/1X413v1a3M0d3C2c1E0i/Screenshot.png" alt="debug worker"></p>
<h4 id="windows-note">Windows note</h4>
<p> On Windows the environment variable is set using the <code>set</code> command.</p>
<pre><code class="lang-cmd"> set DEBUG=*,-not_this
</code></pre>
<p>Then, run the program to be debugged as usual.</p>
<h2 id="millisecond-diff">Millisecond diff</h2>
<p>  When actively developing an application it can be useful to see when the time spent between one <code>debug()</code> call and the next. Suppose for example you invoke <code>debug()</code> before requesting a resource, and after as well, the &quot;+NNNms&quot; will show you how much time was spent between calls.</p>
<p>  <img src="http://f.cl.ly/items/2i3h1d3t121M2Z1A3Q0N/Screenshot.png" alt=""></p>
<p>  When stdout is not a TTY, <code>Date#toUTCString()</code> is used, making it more useful for logging the debug information as shown below:</p>
<p>  <img src="http://f.cl.ly/items/112H3i0e0o0P0a2Q2r11/Screenshot.png" alt=""></p>
<h2 id="conventions">Conventions</h2>
<p> If you&#39;re using this in one or more of your libraries, you <em>should</em> use the name of your library so that developers may toggle debugging as desired without guessing names. If you have more than one debuggers you <em>should</em> prefix them with your library name and use &quot;:&quot; to separate features. For example &quot;bodyParser&quot; from Connect would then be &quot;connect:bodyParser&quot;.</p>
<h2 id="wildcards">Wildcards</h2>
<p>  The <code>*</code> character may be used as a wildcard. Suppose for example your library has debuggers named &quot;connect:bodyParser&quot;, &quot;connect:compress&quot;, &quot;connect:session&quot;, instead of listing all three with <code>DEBUG=connect:bodyParser,connect:compress,connect:session</code>, you may simply do <code>DEBUG=connect:*</code>, or to run everything using this module simply use <code>DEBUG=*</code>.</p>
<p>  You can also exclude specific debuggers by prefixing them with a &quot;-&quot; character.  For example, <code>DEBUG=*,-connect:*</code> would include all debuggers except those starting with &quot;connect:&quot;.</p>
<h2 id="browser-support">Browser support</h2>
<p>  Debug works in the browser as well, currently persisted by <code>localStorage</code>. Consider the situation shown below where you have <code>worker:a</code> and <code>worker:b</code>, and wish to debug both. Somewhere in the code on your page, include:</p>
<pre><code class="lang-js">window.myDebug = require(&quot;debug&quot;);
</code></pre>
<p>  (&quot;debug&quot; is a global object in the browser so we give this object a different name.) When your page is open in the browser, type the following in the console:</p>
<pre><code class="lang-js">myDebug.enable(&quot;worker:*&quot;)
</code></pre>
<p>  Refresh the page. Debug output will continue to be sent to the console until it is disabled by typing <code>myDebug.disable()</code> in the console.</p>
<pre><code class="lang-js">a = debug(&#39;worker:a&#39;);
b = debug(&#39;worker:b&#39;);

setInterval(function(){
  a(&#39;doing some work&#39;);
}, 1000);

setInterval(function(){
  b(&#39;doing some work&#39;);
}, 1200);
</code></pre>
<h4 id="web-inspector-colors">Web Inspector Colors</h4>
<p>  Colors are also enabled on &quot;Web Inspectors&quot; that understand the <code>%c</code> formatting<br>  option. These are WebKit web inspectors, Firefox (<a href="https://hacks.mozilla.org/2014/05/editable-box-model-multiple-selection-sublime-text-keys-much-more-firefox-developer-tools-episode-31/">since version<br>  31</a>)<br>  and the Firebug plugin for Firefox (any version).</p>
<p>  Colored output looks something like:</p>
<p>  <img src="https://cloud.githubusercontent.com/assets/71256/3139768/b98c5fd8-e8ef-11e3-862a-f7253b6f47c6.png" alt=""></p>
<h3 id="stderr-vs-stdout">stderr vs stdout</h3>
<p>You can set an alternative logging method per-namespace by overriding the <code>log</code> method on a per-namespace or globally:</p>
<p>Example <em>stdout.js</em>:</p>
<pre><code class="lang-js">var debug = require(&#39;debug&#39;);
var error = debug(&#39;app:error&#39;);

// by default stderr is used
error(&#39;goes to stderr!&#39;);

var log = debug(&#39;app:log&#39;);
// set this namespace to log via console.log
log.log = console.log.bind(console); // don&#39;t forget to bind to console!
log(&#39;goes to stdout&#39;);
error(&#39;still goes to stderr!&#39;);

// set all output to go via console.info
// overrides all per-namespace log settings
debug.log = console.info.bind(console);
error(&#39;now goes to stdout via console.info&#39;);
log(&#39;still goes to stdout, but via console.info now&#39;);
</code></pre>
<h3 id="save-debug-output-to-a-file">Save debug output to a file</h3>
<p>You can save all debug statements to a file by piping them.</p>
<p>Example:</p>
<pre><code class="lang-bash">$ DEBUG_FD=3 node your-app.js 3&gt; whatever.log
</code></pre>
<h2 id="authors">Authors</h2>
<ul>
<li>TJ Holowaychuk</li>
<li>Nathan Rajlich</li>
</ul>
<h2 id="license">License</h2>
<p>(The MIT License)</p>
<p>Copyright (c) 2014 TJ Holowaychuk &lt;tj@vision-media.ca&gt;</p>
<p>Permission is hereby granted, free of charge, to any person obtaining<br>a copy of this software and associated documentation files (the<br>&#39;Software&#39;), to deal in the Software without restriction, including<br>without limitation the rights to use, copy, modify, merge, publish,<br>distribute, sublicense, and/or sell copies of the Software, and to<br>permit persons to whom the Software is furnished to do so, subject to<br>the following conditions:</p>
<p>The above copyright notice and this permission notice shall be<br>included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &#39;AS IS&#39;, WITHOUT WARRANTY OF ANY KIND,<br>EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF<br>MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.<br>IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY<br>CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,<br>TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE<br>SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</html>